
<ion-view class="product-detail" title="商品详情" hide-tabs>
  <ion-content class="ion-content padding">
    <div class="main">
      <div class="product-image">
        <img src="{{vm.product.Product.coverimg}}" class="imageWidthFull"/>
      </div>
      <div class="above-first-hr">
        <div class="product-name-margin-top">
          <span class="nameFont">
            {{vm.product.Product.name}}
          </span>
          <p/>
          <span>
            {{vm.product.Product.promote_name}}
          </span>
        </div>
        <div>
          <span class="price-symbol"
          >
            ￥
          </span>
          <span class="price">
            {{vm.product.Product.price | currency:''}}
          </span>
          <span class="originalPrice" ng-show="{{vm.product.Product.original_price != 0}}">
            {{vm.product.Product.original_price | currency:"￥"}}
          </span>
          <span class="comment-count">
            口碑评价({{vm.getEvaluateCommentNum()==null?0:vm.getEvaluateCommentNum()}})
          </span>
          <p/>
          <span ng-show="false" class="suggest">
            t_好友。。。推荐了该产品
          </span>
        </div>
      </div>
      <hr/>
      <div class="row">
        <div class="left-title col col-20">
          促销：
        </div>
        <div class="col">
          <span class="offer">
            暂无红包
          </span>
          <p class="promotion-text"/>
          <span ng-show="false">
            t_本店商品满99元立减10元
          </span>
        </div>
      </div>
      <hr/>
      <div class="row">
        <div class="left-title col col-20">
          规格：
        </div>
        <div class="col">
          <div ng-repeat="(ite_name, ite_content) in vm.product.Product.specs.choices" ng-init="vm.specsChecks[ite_name] = {}">
            <span  class="specs-item {{vm.specsChecks[ite_name][ite].value?'specs-item-checked':'specs-item-unchecked'}}" ng-repeat="ite in ite_content" ng-init="vm.specsChecks[ite_name][ite] = {value:false}" ng-click="vm.specsClick(ite_name,ite);">
              {{ite}}
            </span>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="left-title col col-20">
          数量：
        </div>
        <div class="col">
            <span class="number-span ">
              <span class="app-icon icon-reduce count-reduce " ng-click="buttonReduceClick()"></span>
              <span class="count">
                <input  ng-model="vm.count">
              </span>
              <span class="app-icon icon-add count-add " ng-click="buttonAddClick()"></span>
            </span>
          </div>
        </div>
      </div>
      <div class="list brand-button">
        <a class="item item-avatar item-icon-right" ui-sref="store.home({storeId:vm.brand.Brand.id})" >
          <img src="{{vm.brand.Brand.coverimg}}" class="brandImg"/>
          <i class=" icon ion-ios7-arrow-right"></i>
          <span class="brand-name">
            进入{{vm.brand.Brand.name}}的店铺
          </span>
        </a>
      </div>
      <div class="post-service">
        <div class="row">
          <div class="left-title col col-20">
            快递：
          </div>
          <div class="col">
            <span class="shipFee">
            邮费：{{vm.product.Product.ship_fee==0?'包邮':(vm.product.Product.ship_fee | currency:'￥')}}
            </span>
          </div>
        </div>
        <div class="row">
          <div class="left-title col col-20">
            服务：
          </div>
          <div ng-show="false" class="col">
            t_本商品由。。提供，周日统一发货，朋友说提供售后服务。。。
          </div>
        </div>
      </div>
      <div class="list menu-">
        <div  ng-click="vm.menuClick(0)"class="item item-icon-right  menu-item ">
          <i class=" icon ion-ios7-arrow-right"></i>
          <span class="menu-text" >
            商品详情
          </span>
        </div>
        <div ng-show="vm.isShowMenuContents[0]" class="product-intro" ng-bind-html="vm.content.Product.content">
        </div>
        <div ng-click="vm.menuClick(1)" class="item item-icon-right  menu-item ">
          <i class=" icon ion-ios7-arrow-right"></i>
          <span class="menu-text" >
            试吃评价
            <span class="menu-sub-text">({{vm.getShichiCommentNum()==null?0:vm.getShichiCommentNum()}})</span>
          </span>
        </div>
        <div ng-show="false">
          <div class="list">
            <div ng-show="ite.Comment.is_shichi_tuan_comment == '1'" class="item evaluate" ng-repeat="ite in vm.comment">
              <div>
                <span ng-show="ite.Comment.userPhoto != null" class="user-image" style="background: url('{{ite.Comment.userPhoto}}');background-size:contain;"></span>
                <span ng-show="ite.Comment.userPhoto == null" class="app-icon icon-user user-image"></span>
                <span >{{ite.Comment.username}}</span>
                <span class="create-time">{{ite.Comment.created}}</span>
              </div>
              <div class="stars">
                <span class="app-icon {{vm.isShowStar(ite,0)?'icon-star':'icon-star-gray'}}"></span>
                <span class="app-icon {{vm.isShowStar(ite,1)?'icon-star':'icon-star-gray'}}"></span>
                <span class="app-icon {{vm.isShowStar(ite,2)?'icon-star':'icon-star-gray'}}"></span>
                <span class="app-icon {{vm.isShowStar(ite,3)?'icon-star':'icon-star-gray'}}"></span>
                <span class="app-icon {{vm.isShowStar(ite,4)?'icon-star':'icon-star-gray'}}"></span>
              </div>
              <div>
                <span class="text">
                  {{ite.Comment.body}}
                </span>
              </div>
              <div>
                <img ng-repeat="img in ite.Comment.images" src="{{img}}" class="evaluate-image"/>
              </div>
              <span class="buy-time">
                购买时间：{{ite.Comment.created}}
              </span>
            </div>
          </div>
        </div>
        <div ng-click="vm.menuClick(2)" class="item item-icon-right  menu-item menu-evaluate">
          <i class=" icon ion-ios7-arrow-right"></i>
          <span class="menu-text" >
            口碑评价
            <span class="menu-sub-text">({{vm.getEvaluateCommentNum()==null?0:vm.getEvaluateCommentNum()}})</span>
          </span>
        </div>

        <div class="list">
          <div  ng-show="$index<3" class="item evaluate" ng-repeat="ite in vm.getEvaluateComment()">
            <hr class="hr"/>
            <div> 
              <span ng-show="ite.Comment.userPhoto != null" class="user-image"   style="background: url('{{ite.Comment.userPhoto}}');background-size:contain;"></span>
              <span ng-show="ite.Comment.userPhoto == null" class="app-icon icon-user user-image"></span>
              <span >{{ite.Comment.username}}</span>
              <span class="create-time">{{ite.Comment.created}}</span>
            </div>
            <div class="stars">
              <span class="app-icon {{vm.isShowStar(ite,0)?'icon-star':'icon-star-gray'}}"></span>
              <span class="app-icon {{vm.isShowStar(ite,1)?'icon-star':'icon-star-gray'}}"></span>
              <span class="app-icon {{vm.isShowStar(ite,2)?'icon-star':'icon-star-gray'}}"></span>
              <span class="app-icon {{vm.isShowStar(ite,3)?'icon-star':'icon-star-gray'}}"></span>
              <span class="app-icon {{vm.isShowStar(ite,4)?'icon-star':'icon-star-gray'}}"></span>
            </div>
            <div>
              <span class="text">
                {{ite.Comment.body}}
              </span>
            </div>
            <div>
              <img ng-repeat="img in ite.Comment.images" src="{{img}}" class="evaluate-image"/>
            </div>
            <span ng-show="false" class="buy-time">
              购买时间：{{ite.Comment.created}}
            </span>
          </div>
          <div ng-show="vm.getEvaluateCommentNum()>3" class="item evaluate">
            <hr class="hr"/>
            <div class="all-comment">
              查看全部评价
            </div>
          </div>
          <div class="list make-comment">
            <div class="list">
              <div class="row stars" >
                <span ng-click="vm.commentT.rating=1;" class="app-icon star {{vm.isShowMakeCommentStar(0)?'icon-star':'icon-star-gray'}} "></span>
                <span ng-click="vm.commentT.rating=2;" class="app-icon star {{vm.isShowMakeCommentStar(1)?'icon-star':'icon-star-gray'}}"></span>
                <span ng-click="vm.commentT.rating=3;" class="app-icon star {{vm.isShowMakeCommentStar(2)?'icon-star':'icon-star-gray'}}"></span>
                <span ng-click="vm.commentT.rating=4;" class="app-icon star {{vm.isShowMakeCommentStar(3)?'icon-star':'icon-star-gray'}}"></span>
                <span ng-click="vm.commentT.rating=5;" class="app-icon star {{vm.isShowMakeCommentStar(4)?'icon-star':'icon-star-gray'}}"></span>
              </div>
              <div>
                <div>
                  <span class="input-label">请输入评价：</span>
                  <textarea ng-model="vm.commentT.text" class="textbox"></textarea>
                </div>
                  <p/>
                <div>
                  <button class="button button-energized">
                    添加图片
                  </button>
                  <div>
                    ImageArea
                  </div>
                  <div align="right">
                    <div ng-click="vm.confirmComment()" class="button button-energized" >
                      提交评论
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ion-content>
  <ion-footer-bar class="footer footer-bar">
    <span  ng-click="vm.showTabs();vm.addToCart();" ui-sref="app.cart" class="footer-buy-now">
      立即购买
    </span>
    <span ng-click="vm.addToCart();" class="footer-add-cart">
      加入购物车
    </span>
    <div ng-click="vm.showTabs();" ui-sref="app.cart"  class="footer-cart">
      <span ng-hide="cart.cartItems.length == 0" class="badge">{{cart.cartItems.length}}</span>
      <span class="footer-cart-image app-icon icon-cart">
      </span>
      <br/>
      <div  class="footer-cart-text">
        购物车
      </span>
    </div>
  </ion-footer-bar>
</ion-view>