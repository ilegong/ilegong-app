<ion-view title="订单详情" class="order-detail" hide-back-button='true'>
   <ion-nav-buttons side="left">
    <button class="button button-clear back-button" ng-click="$ionicGoBack($event)">
      <i class="icon ion-ios7-arrow-left"></i>
    </button>
  </ion-nav-buttons>
  <ion-content class="list">
    <div class="item">
      <div>收货地址</div> 
      <div class="text-sub-muted">
        {{vm.order.Order.consignee_area}}{{vm.order.Order.consignee_address}}
      </div>
      <span class="text-sub-muted">
      {{vm.order.Order.consignee_name}}
      </span>
      <span class="text-sub-muted">
        {{vm.order.Order.consignee_mobilephone}}
      </span>
    </div>
    <a class="item item-avatar item-icon-right row" ng-click="store.home({id: vm.store.id, name: vm.store.name})">
      <img src="{{vm.store.coverimg}}" style="top: 1em;"/>
      <i class="icon ion-ios7-arrow-right"></i>
      <div class="text col col-center">{{vm.store.name}}</div>
      <div class="button pys-button button-outline button-balanced col-33" ng-click="vm.callHotline(); $event.stopPropagation();" >
        服务电话
      </div>
    </a>
    <div class="item">
      订单状态：<span class="text-energized">{{vm.orderState.name}}</span>
    </div>
    <a class="item item-thumbnail-left item-icon-right"  ng-repeat="item in vm.cartItems" ng-click="vm.toProductDetailPage(item);">
      <img src="{{item.Cart.coverimg}}"/>
      <i class="icon ion-ios7-arrow-right"></i>
      <div class="text">{{item.Cart.name}}</div>
      <div class="text-sub-muted">
        价格：{{item.Cart.price | currency:'￥'}}&nbsp;数量：{{item.Cart.num}}
      </div>
      <div class="text-sub-muted" ng-show="!_.isEmpty(item.Cart.spec)">
        规格：{{item.Cart.spec}}
      </div>
    </a>
    <div class="item">
      运费：{{vm.order.Order.ship_fee | currency:'￥'}}
    </div>
    <div class="item">
      <div class="fl">
        订单号：{{vm.order.Order.id}}
        <div class="text-sub-muted">
          下单时间：{{vm.order.Order.created}}
        </div>
        <div class="text-sub-muted" ng-show="vm.hasPaid">
          支付时间：{{vm.order.Order.pay_time}}
        </div>
      </div>
      <a class="button fr" ng-show="vm.order.Order.status == 2" ng-disabled="true" ng-click="vm.viewLogistics()">查看物流</a>
    </div>
  </ion-content>
  <ion-footer-bar class="row">
    <span class="col">
      合计：<span class="text-energized">￥<span class="text-large">{{vm.totalPrice | currency:''}}</span></span>
    </span>

    <a class="button pys-button col-25" ng-really-click="vm.cancelOrder(vm.order)" ng-really-message="您确定要取消订单吗？" ng-show="vm.order.Order.status == 0" style="margin-left: 0.5em;"><strong>取消订单</strong></a>
    <a class="button pys-button button-energized col-25" ng-click="vm.aliPay()" ng-show="vm.order.Order.status == 0" style="margin-left: 0.5em;"><strong>支付</strong></a>

    <a class="button pys-button col-25" ng-class="{'button-balanced button-outline': !vm.order.reminded}" ng-show="vm.order.Order.status == 1" ng-click="vm.remindSendingGoods(vm.order)" ng-disabled="vm.order.reminded" style="margin-left: 0.5em;"><strong>提醒发货</strong></a>

    <a class="button pys-button button-energized col-25" ng-show="vm.order.Order.status == 2" ng-really-click="vm.confirmReceivingGoods(vm.order)" ng-really-message="您确定收到货了吗？" style="margin-left: 0.5em;"><strong>确认收货</strong></a>

    <a class="button pys-button col-25" ng-class="{'button-energized': false}" ng-show="vm.order.Order.status == 3" ng-disabled='true' ng-click="vm.addRemark(vm.order)" style="margin-left: 0.5em;"><strong>评价</strong></a>
  </ion-footer-bar>
</ion-view>
