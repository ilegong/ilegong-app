<ion-view title="账号">
  <ion-nav-buttons side="right">
    <button class="button button-clear button-positive" ui-sref="app.my-account-login">登录</button>
  </ion-nav-buttons>
  <ion-content class="my-account-register">
    <div class="list">
      <label class="item item-input item-stacked-label">
        <span class="input-label">手机号</span>
        <input type="text" ng-model="vm.user.mobile" placeholder="手机号">
      </label>
      <div class='item item-input item-row item-stacked-label'>
        <label class="col col-50">
          <span class="input-label">验证码</span>
          <input type="text" ng-model='vm.user.captchaCode' placeholder="验证码" ng-blur="vm.verifyCaptchaCode()">
        </label>
        <img id='captchaImage' class='col col-50' ng-click="vm.showCaptchaCode()"/>
      </div>
      <div class='item item-input item-row item-stacked-label'>
        <label class="col col-50">
          <span class="input-label">短信验证码</span>
          <input type="text" ng-model='vm.user.smsCode' placeholder="短信验证码">
        </label>
        <button id="smsCodeButton" class="sms-code col col-33" ng-class="{enabled: vm.user.captchaCodeVerified && !vm.user.smsSent}" ng-click="vm.getSmsCode()" ng-disabled="!vm.user.captchaCodeVerified || vm.user.smsSent">
          {{vm.user.smsSent? "短信已发送" : "点击获取"}}
        </button>
      </div>
      <label class="item item-input item-stacked-label">
        <span class="input-label">密码</span>
        <input type="password" ng-model='vm.user.password' placeholder="密码">
      </label>
    </div>
    <div class="card" ng-show="vm.user.registerFailed">
      <span class="item item-icon-left alert-danger">
        <i class="icon ion-close"></i>
        注册失败
      </span>
      </div>
    <div class="padding">
      <button class="button button-block button-positive" ng-disabled="!vm.user.captchaCodeVerified" ng-click="vm.register()">注册</button>
    </div>
  </ion-content>
</ion-view>